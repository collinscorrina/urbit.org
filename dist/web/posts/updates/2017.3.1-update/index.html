<html><head></head><meta charset="utf-8" /><body><html><head><meta charset="UTF-8" /><title>Urbit / Posts</title><meta name="viewport" content="width=device-width , initial-scale=1" /><link href="/tilde.ico" rel="icon" /><link href="/css/base.css" rel="stylesheet" /><link href="/css/lists.css" rel="stylesheet" /><link href="/css/visibility.css" rel="stylesheet" /><link href="/css/borders.css" rel="stylesheet" /><link href="/css/colors.css" rel="stylesheet" /><link href="/css/inputs.css" rel="stylesheet" /><link href="/css/typography.css" rel="stylesheet" /><link href="/css/menu.css" rel="stylesheet" /><link href="/css/images.css" rel="stylesheet" /><link href="/css/flex.css" rel="stylesheet" /><script src="https://www.googletagmanager.com/gtag/js?id=UA-47054188-1"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-47054188-1');</script></head><body><nav class="bg-black pb-36 menu-hide overflow-y"><div class="container"><div class="row pt-10 mb-3"><div class="col-sm-1 menu-toggle"><img class="w-8 h-8" src="/assets/menu-close.svg" /></div><div class="col-sm-9 col-md-8 col-lg-4 col-sm-offset-2 col-md-offset-1 white"><div class="mb-6"><a href="/primer"><h1>Primer</h1></a><p> </p></div><div class="mb-6"><a href="/posts"><h1>Posts</h1></a><p> </p></div><div class="mb-6"><a href="/docs"><h1>Docs</h1></a><p> </p></div></div></div></div><footer class="container mb-36 white"><div class="row"><div class="col-sm-6 col-sm-offset-3 col-md-offset-2"><div><div class="mb-6"><h4 class="mb-1">Follow</h4><div><a class="text-mono" href="https://twitter.com/@urbit" target="_blank">twitter.com/@urbit</a></div><div><a class="text-mono" href="https://github.com/urbit" target="_blank">github.com/@urbit</a></div></div><div class="mb-6"><h4 class="mb-1">Contact</h4><div class="text-mono text-400">~zod</div><div><a class="text-mono" href="mailto:support@urbit.org">support@urbit.org</a></div></div><div class="mb-6"><h4 class="mb-1">Company</h4><div><a href="/privacy">Privacy Policy</a></div><div><a href="/tos">Terms of Service</a></div><div class="text-400"><a href="/bounty">Bug Bounty + Security</a></div></div></div></div></div></footer></nav><div class="container mt-10"><div class="row fixed"><div class="col-sm-12 menu-toggle"><img class="w-8 h-8" src="/assets/menu-open.svg" /></div><div class="col-sm-8 col-md-12 ml-1 mt-3 sm-2"><ul class="list-reset h-font"><a href="/posts"><li>All</li></a><a href="/posts/updates"><li>Updates</li></a><a href="/posts/essays"><li>Essays</li></a><a href="/posts/media"><li>Media</li></a></ul></div></div><div class="row pb-80"><div class="col-sm-9 col-md-8 col-sm-offset-3 col-md-offset-2"><div class="post col-sm-12"><div><h1 id="-2017-3-1-update-">~2017.3.1 Update </h1><p><b>Curtis</b> (<code>~sorreg-namtyv</code>) has reached code-complete (compiling but not tested) on the <code>arvo.hoon</code> rewrite. The super-impatient can have a look at <a href="https://github.com/cgyarvin/arvo/blob/revere-ivory/sys/parv.hoon">this file</a>. </p><p>The entire boot sequence from Nock through the Arvo kernel has now been rewritten, and actually makes sense. The old Arvo did work, it&#39;s true, under most conditions. It didn&#39;t work because it made sense, but mainly through pure persistence and luck. This is not viable for the deep core of a stable platform. It has, however, managed to stay alive on the network for the past 7 months. </p><p>This all-new Arvo kernel (at a very fluffy 1065 lines) joins the all-new <code>%ames</code> and <code>%jael</code> vanes (kernel modules), and the <code>%zuse</code> library, in the new family of reference-quality Hoon code. (<code>%ames</code> is almost there -- the code is good, but not documented.) </p><p>Roughly speaking, Urbit including all application, library, and kernel code, is about 40,000 lines of Hoon, in three grades, categorized by how clean and easy to read they are. </p><p>C-grade Hoon is found in <code>%eyre</code> (Web server) and <code>%dill</code> (console); a bit of it has accumulated in <code>:talk</code>; the markdown parser; some of the examples; some of <code>hoon.hoon</code>; etc. </p><p>C-grade Hoon is write-only code. To even look at it, even if you know Hoon, is reverse engineering. It follows no conventions, not even its own. If it has comments, they mean nothing, except (possibly) to the author. (One bad property of Hoon is that, like C, it does nothing to stop you from writing obfuscated code.) Most C-grade Hoon dates to 2014 or early &#39;15. </p><p>B-grade Hoon can be followed with some effort. It is structurally simple, but not always conceptually simple. It makes no particular effort to explain itself, either through documentation or otherwise. <code>%behn</code>, <code>%clay</code> (B+ for decent comments), <code>%ford</code>, <code>%gall</code>, most of <code>hoon.hoon</code> and most userspace code is B-grade. Most B-grade code is from late &#39;15 or early &#39;16. </p><p>The A-grade Hoon is everything produced since our crowdsale: <code>%ames</code>, <code>%zuse</code>, <code>%jael</code>, and <code>%parv</code>. Hoon of this quality, you just spread on a cracker and eat. It&#39;s completely smooth. You can almost see what it&#39;s doing even if you don&#39;t know Hoon. The only places where A-grade Hoon is hard to understand are places where the problem is actually tricky. </p><p>Urbit succeeds exclusively through software quality. All A-grade code should be permanently maintainable at consistent quality. All B-grade and C-grade code will deteriorate over time and eventually needs to be replaced. </p><p>But <code>cc-release</code> is an “infrastructure MVP” in which the critical parts are A-grade: the boot sequence and OS, networking, and secrets. Lower-grade code remains suitable for light-duty kernel and userspace work. The good news is that the longer we wait to rewrite it, the better the replacement will be. </p><p>These new A-grade subsystems remain untested (except <code>%jael</code> and <code>%zuse</code>) and have not been integrated. This will involve further tinkering with other vanes and userspace code. However, Arvo should be the last major module rewrite before <code>cc-release</code>, so we&#39;re on our way. </p><p><b>Anton</b> (<code>~pittyp-pittyp</code>) and <b>Galen</b> (<code>~ravmel-ropdyl</code>) are working from the opposite end. They&#39;re designing the new, easy-to-use, command-completing Urbit UI from the top down, using ES6 and React. </p><p>This new framework isn&#39;t even connected to Urbit. Its first use is actually a demo video. We published a few screenshots from our mockups in the last blog post, and want to give a more complete impression of where we&#39;re headed to the public. Making this interface real will, of course, require nontrivial console engineering on the Urbit side. We think it&#39;s going to be great. </p><p>Like our new server-side code, the new Urbit client-side framework is designed to be high-quality code that other human beings can read and extend. </p><p><b>Raymond</b> (<code>~maldeb-hapben</code>) has finished breaking the new <code>vere</code> system into client, manager and worker processes. Curtis earlier rewrote the event loop and the logging system, with correct use of concurrency and <code>fsync()</code> in an actual two-phase commit. </p><p>There&#39;s still a large number of small tasks to perform, but we&#39;re essentially turning <code>vere</code> into the C equivalent of A-grade Hoon: clean code that just obviously works. Also, the new <code>vere</code> works like an actual, industrial-grade server, and should be reasonably adapted to the task of hosting nontrivial numbers of urbits. </p><p>The absolutely crucial requirement for <code>cc-release</code> is ships that don&#39;t sink. We have not observed any problems with the new event log so far, but we still need to stress-test it with powercycles. Yes, Urbit really is an ACID database! </p><p><b>Keaton</b> (<code>~livweb-havweb</code>), our intern, has written a bunch of examples and cleaned up a bunch of doc. </p><p><b>Elliot</b> (<code>~ponnys-podfer</code>), an outside contributor, sent an amazing <code>doccords</code> patch that adds documentation strings to Hoon. This sounds like a superficial change, but it actually involved deep work in the heart of the type system. He&#39;s also added a bunch of this doc himself. </p><p>You can check out the pull requests <a href="https://github.com/urbit/arvo/pull/353">here</a> and <a href="https://github.com/urbit/arvo/pull/356">here</a>. The original <code>fora</code> discussion is <a href="http://urbit.org/fora/posts/~2017.1.16..06.08.17..ae0f~/">here</a>. </p><p>As usual, comments are on fora. Check out <a href="http://urbit.org/fora/posts/~2017.3.1..22.06.50..bf2a~/">this thread</a>. </p></div></div></div></div></div><footer class="container mb-36"><div class="row"><div class="col-sm-8 col-sm-offset-3 col-lg-4 col-md-offset-2"><div id="mc_embed_signup"><h2 class="mb-2">Updates</h2><p>Every month we send an email with community events and what we&#39;re up to. </p><iframe name="nothing" style="display:none;"></iframe><form id="mc-embedded-subscribe-form" class="validate" action="https://urbit.us11.list-manage.com/subscribe/post?u=972a03db9e0c6c25bb58de8c8&amp;amp;id=be143888d2" method="post" name="mc-embedded-subscribe-form" target="nothing"><div class="input-group text-mono" id="mc_embed_signup_scroll"><div class="mc-field-group"><input class="required mb-2" type="email" name="EMAIL" id="mce-EMAIL" placeholder="your@email.com"></input></div><div id="mce-responses" class="clear"><div id="mce-error-response" class="response" style="display:none"></div><div id="mce-success-response" class="response" style="display:none"></div></div><div style="position: absolute; left: -5000px;"><input type="text" name="b_972a03db9e0c6c25bb58de8c8_be143888d2"></input></div><div class="clear"><button id="mc-embedded-subscribe" class="bg-black white h-font" type="submit" name="subscribe"><span class="text-500">Subscribe</span></button></div></div></form></div></div></div><div class="row"><div class="col-sm-6 col-sm-offset-3 col-md-offset-2"><div><div class="mb-6"><h4 class="mb-1">Follow</h4><div><a class="text-mono" href="https://twitter.com/@urbit" target="_blank">twitter.com/@urbit</a></div><div><a class="text-mono" href="https://github.com/urbit" target="_blank">github.com/@urbit</a></div></div><div class="mb-6"><h4 class="mb-1">Contact</h4><div class="text-mono text-400">~zod</div><div><a class="text-mono" href="mailto:support@urbit.org">support@urbit.org</a></div></div><div class="mb-6"><h4 class="mb-1">Company</h4><div><a href="/privacy">Privacy Policy</a></div><div><a href="/tos">Terms of Service</a></div><div class="text-400"><a href="/bounty">Bug Bounty + Security</a></div></div></div></div></div><script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script><script src="/js/main.js"></script></footer></body></html></body></html>